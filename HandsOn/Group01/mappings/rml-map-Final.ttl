@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix schema: <https://schema.org/> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix dbo: <http://dbpedia.org/ontology/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sc: <http://smartcity.linkeddata.es/lcc/ontology#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

 ######### PARKS ######
<#ParkMap>
  rml:logicalSource [
    rml:source "../csv/parques-jardines-updated.csv";
    rml:referenceFormulation ql:CSV;

  ];
  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/facility/park/{IDNOMBRE}";
    rr:class schema:ParkGarden;
    rr:class sc:Facility;
    rr:termType rr:IRI;
  ];

  # Hereda todas las propiedades comunes
  rr:predicateObjectMap [ rr:predicate schema:name ; rr:objectMap [ rml:reference "NOMBRE" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicateMap [ rr:constant schema:addressRegion ] ;rr:objectMap [ rml:reference "PROVINCIA" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:postalCode ; rr:objectMap [ rml:reference "CODIGO-POSTAL" ; rr:datatype xsd:string ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:streetAddress ; rr:objectMap [ rml:reference "NOMBRE-VIA" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:telephone ; rr:objectMap [ rml:reference "TELEFONO" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:email ; rr:objectMap [ rml:reference "EMAIL" ] ] ;
  rr:predicateObjectMap [ rr:predicate sc:accessibility ; rr:objectMap [ rml:reference "ACCESIBILIDAD" ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:lat ; rr:objectMap [ rml:reference "LATITUD" ; rr:datatype xsd:decimal ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:long ; rr:objectMap [ rml:reference "LONGITUD" ; rr:datatype xsd:decimal ] ] ;

  #Localización espacial común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate schema:containedInPlace ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/neighbourhood/{BARRIO}" ; rr:termType rr:IRI ] 
  ] ;

  # Transporte común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/subway/{Metro}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/bus/{Bus}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/suburbantrain/{Cercanias}"; rr:termType rr:IRI ];
  ];

  # Propiedades específicas de Park
  rr:predicateObjectMap [ rr:predicate sc:surface; rr:objectMap [ rml:reference "Superfice m²"; rr:datatype xsd:integer ] ];
  rr:predicateObjectMap [ rr:predicate sc:hasSportsFacilities; rr:objectMap [ rml:reference "tieneInstalacionesDeportivas" ] ] .

 ######### LIBRARIES  ######
<#LibraryMap>
   rml:logicalSource [
    rml:source "../csv/bibliotecas-updated.csv";
    rml:referenceFormulation ql:CSV;
  ];
  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/facility/library/{IDNOMBRE}";
    rr:class schema:Library;
    rr:class sc:Facility;
    rr:termType rr:IRI;
  ];

  # Hereda todas las propiedades comunes
  rr:predicateObjectMap [ rr:predicate schema:name ; rr:objectMap [ rml:reference "NOMBRE" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicateMap [ rr:constant schema:addressRegion ] ;rr:objectMap [ rml:reference "PROVINCIA" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:postalCode ; rr:objectMap [ rml:reference "CODIGO-POSTAL" ; rr:datatype xsd:string ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:streetAddress ; rr:objectMap [ rml:reference "NOMBRE-VIA" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:telephone ; rr:objectMap [ rml:reference "TELEFONO" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:email ; rr:objectMap [ rml:reference "EMAIL" ] ] ;
  rr:predicateObjectMap [ rr:predicate sc:accessibility ; rr:objectMap [ rml:reference "ACCESIBILIDAD" ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:lat ; rr:objectMap [ rml:reference "LATITUD" ; rr:datatype xsd:decimal ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:long ; rr:objectMap [ rml:reference "LONGITUD" ; rr:datatype xsd:decimal ] ] ;

  #Localización espacial común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate schema:containedInPlace ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/neighbourhood/{BARRIO}" ; rr:termType rr:IRI ] 
  ] ;

  # Transporte común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/subway/{Metro}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/bus/{Bus}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/suburbantrain/{Cercanias}"; rr:termType rr:IRI ];
  ] ;

  # Propiedades específicas de library
  rr:predicateObjectMap [ rr:predicate sc:hasWifi; rr:objectMap [ rml:reference "tieneWifi" ] ].

 ######### EDUCATIONAL INSTITUTION  ######
<#EducationalInstitutionMap>
   rml:logicalSource [
    rml:source "../csv/universidades-updated.csv";
    rml:referenceFormulation ql:CSV;
  ];
  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/facility/educationalInstitution/{IDNOMBRE}";
    rr:class sc:EducationalInstitution;
    rr:class sc:Facility;
    rr:termType rr:IRI;
  ];

  # Hereda todas las propiedades comunes
  rr:predicateObjectMap [ rr:predicate schema:name ; rr:objectMap [ rml:reference "NOMBRE" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicateMap [ rr:constant schema:addressRegion ] ;rr:objectMap [ rml:reference "PROVINCIA" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:postalCode ; rr:objectMap [ rml:reference "CODIGO-POSTAL" ; rr:datatype xsd:string ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:streetAddress ; rr:objectMap [ rml:reference "NOMBRE-VIA" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:telephone ; rr:objectMap [ rml:reference "TELEFONO" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:email ; rr:objectMap [ rml:reference "EMAIL" ] ] ;
  rr:predicateObjectMap [ rr:predicate sc:accessibility ; rr:objectMap [ rml:reference "ACCESIBILIDAD" ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:lat ; rr:objectMap [ rml:reference "LATITUD" ; rr:datatype xsd:decimal ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:long ; rr:objectMap [ rml:reference "LONGITUD" ; rr:datatype xsd:decimal ] ] ;

  #Localización espacial común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate schema:containedInPlace ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/neighbourhood/{BARRIO}" ; rr:termType rr:IRI ] 
  ] ;

  # Transporte común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/subway/{Metro}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/bus/{Bus}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/suburbantrain/{Cercanias}"; rr:termType rr:IRI ];
  ];

  #Género alumnos, propiedad específica de los ResidenceHall, en teoría se generaría solo si existe valor en esa columna. 
  rr:predicateObjectMap [ rr:predicate sc:studentGender ; rr:objectMap [ rml:reference "generoAlumnos" ] ] .

 ######### SPORT CENTERS ######
<#SportCenterMap>
   rml:logicalSource [
    rml:source "../csv/polideportivos-updated.csv";
    rml:referenceFormulation ql:CSV;
  ];
  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/facility/sportCenter/{IDNOMBRE}";
    rr:class sc:SportsCenter;
    rr:class sc:Facility;
    rr:termType rr:IRI;
  ];

  # Hereda todas las propiedades comunes
  rr:predicateObjectMap [ rr:predicate schema:name ; rr:objectMap [ rml:reference "NOMBRE" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicateMap [ rr:constant schema:addressRegion ] ;rr:objectMap [ rml:reference "PROVINCIA" ; rr:termType rr:Literal ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:postalCode ; rr:objectMap [ rml:reference "CODIGO-POSTAL" ; rr:datatype xsd:string ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:streetAddress ; rr:objectMap [ rml:reference "NOMBRE-VIA" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:telephone ; rr:objectMap [ rml:reference "TELEFONO" ] ] ;
  rr:predicateObjectMap [ rr:predicate schema:email ; rr:objectMap [ rml:reference "EMAIL" ] ] ;
  rr:predicateObjectMap [ rr:predicate sc:accessibility ; rr:objectMap [ rml:reference "ACCESIBILIDAD" ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:lat ; rr:objectMap [ rml:reference "LATITUD" ; rr:datatype xsd:decimal ] ] ;
  rr:predicateObjectMap [ rr:predicate geo:long ; rr:objectMap [ rml:reference "LONGITUD" ; rr:datatype xsd:decimal ] ] ;

  #Localización espacial común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate schema:containedInPlace ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/neighbourhood/{BARRIO}" ; rr:termType rr:IRI ] 
  ] ;

  # Transporte común a todas las facilities
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/subway/{Metro}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/bus/{Bus}"; rr:termType rr:IRI ];
  ];
  rr:predicateObjectMap [
    rr:predicate sc:hasNearby;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/suburbantrain/{Cercanias}"; rr:termType rr:IRI ];
  ] .

##################################################################
# DISTRICT, NEIGHBOURHOOD Y MUNICIPALITY
##################################################################

<#DistrictMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/district/{DISTRITO}" ;
    rr:class dbo:District ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:name ;
    rr:objectMap [ rml:reference "DISTRITO" ; rr:termType rr:Literal ] 
  ] ;

  rr:predicateObjectMap [
    rr:predicate sc:locatedInMunicipality ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/municipality/{LOCALIDAD}" ; rr:termType rr:IRI ] 
  ] .

<#NeighbourhoodMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/neighbourhood/{BARRIO}" ;
    rr:class dbo:Neighbourhood ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:name ;
    rr:objectMap [ rml:reference "BARRIO" ; rr:termType rr:Literal ] 
  ] ;

  rr:predicateObjectMap [
    rr:predicate sc:locatedInDistrict ;
    rr:objectMap [ rr:template "http://smartcity.linkeddata.es/lcc/resource/district/{DISTRITO}" ; rr:termType rr:IRI ] 
  ] .

<#MunicipalityMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/municipality/{LOCALIDAD}" ;
    rr:class dbo:Municipality ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:name ;
    rr:objectMap [ rml:reference "LOCALIDAD" ; rr:termType rr:Literal ] 
  ] .

#######################
## TRANSPORT
#######################
<#METROMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/subway/{Metro}" ;
    rr:class schema:SubwayStation ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:name ; 
    rr:objectMap [ rml:reference "Metro" ; rr:termType rr:Literal ] 
  ] ;

  rr:predicateObjectMap [
    rr:predicate sc:hasLines  ;
    rr:objectMap [ rml:reference "metro_line" ; rr:termType rr:Literal ] 
  ] .

<#CercaniasMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/suburbantrain/{Cercanias}" ;
    rr:class schema:TrainStation ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:name ; 
    rr:objectMap [ rml:reference "Cercanias" ; rr:termType rr:Literal ] 
  ] ;

  rr:predicateObjectMap [
    rr:predicate sc:hasLines  ;
    rr:objectMap [ rml:reference "Cercanias Lines" ; rr:termType rr:Literal ] 
  ] .

<#BusMap> 
  rml:logicalSource [ rml:source "../csv/combinado-updated.csv" ; rml:referenceFormulation ql:CSV ] ;

  rr:subjectMap [
    rr:template "http://smartcity.linkeddata.es/lcc/resource/bus/{Bus}" ;
    rr:class schema:BusStation ;
    rr:termType rr:IRI ;
  ] ;

  rr:predicateObjectMap [
    rr:predicate schema:hasLines  ;
    rr:objectMap [ rml:reference "bus_line" ; rr:termType rr:Literal ] 
  ] .