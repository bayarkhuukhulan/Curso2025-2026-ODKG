prefixes:
  rr: http://www.w3.org/ns/r2rml#
  rml: http://semweb.mmlab.be/ns/rml#
  ql: http://semweb.mmlab.be/ns/ql#
  xsd: http://www.w3.org/2001/XMLSchema#
  mts: http://madrid-transport-safety.org/ontology#
  resource: http://madrid-transport-safety.org/resource/

mappings:
  PedestrianDataMap:
    sources:
      - [../csv/PEATONES_2024-updated.csv~csv]
    s: http://madrid-transport-safety.org/resource/pedestrian-observation/$(identificador)/$(fecha)/$(hora)
    po:
      - [a, mts:PedestrianData]
      - [mts:pedestrianDate, $(fecha)]
      - [mts:pedestrianTime, $(hora)]
      - [mts:pedestrianIdentifier, $(identificador)]
      - [mts:pedestrianCounter, $(peatones), xsd:integer]
      - [mts:pedestrianStreetName, $(direccion)]
      - [mts:pedestrianObservationDirection, $(observaciones_direccion)]
      - [mts:pedestrianLatitude, $(latitude), xsd:decimal]
      - [mts:pedestrianLongitude, $(longitude), xsd:decimal]
      - p: mts:locatedInDistrict
        o:
          mapping: DistrictMap
          condition:
            function: equal
            parameters:
              - [str1, $(Número_distrito)]
              - [str2, $(Número_distrito)]

  DistrictMap:
    sources:
      - [../csv/PEATONES_2024-updated.csv~csv]
    s: http://madrid-transport-safety.org/resource/district/$(Número_distrito)
    po:
      - [a, mts:District]
      - [mts:districtCode, $(Número_distrito), xsd:integer]
      - [mts:districtName, $(distrito)]
