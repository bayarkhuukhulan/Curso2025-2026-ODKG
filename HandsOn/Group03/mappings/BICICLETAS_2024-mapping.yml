prefixes:
  rr: http://www.w3.org/ns/r2rml#
  rml: http://semweb.mmlab.be/ns/rml#
  ql: http://semweb.mmlab.be/ns/ql#
  xsd: http://www.w3.org/2001/XMLSchema#
  mts: http://madrid-transport-safety.org/ontology#
  resource: http://madrid-transport-safety.org/resource/

mappings:
  BicycleDataMap:
    sources:
      - [../csv/BICICLETAS_2024-updated.csv~csv]
    s: http://madrid-transport-safety.org/resource/bicycle-observation/$(identificador)/$(fecha)/$(hora)
    po:
      - [a, mts:BicycleData]
      - [mts:bicycleDate, $(fecha)]
      - [mts:bicycleTime, $(hora)]
      - [mts:bicycleIdentifier, $(identificador)]
      - [mts:bicycleCounter, $(bicicletas), xsd:integer]
      - [mts:bicycleStreetName, $(direccion)]
      - [mts:bicycleObservationDirection, $(observaciones_direccion)]
      - [mts:bicycleLatitude, $(latitude), xsd:decimal]
      - [mts:bicycleLongitude, $(longitude), xsd:decimal]
      - p: mts:locatedInDistrict
        o:
          mapping: DistrictMap
          condition:
            function: equal
            parameters:
              - [str1, $(Número_distrito)]
              - [str2, $(Número_distrito)]

  DistrictMap:
    sources:
      - [../csv/BICICLETAS_2024-updated.csv~csv]
    s: http://madrid-transport-safety.org/resource/district/$(Número_distrito)
    po:
      - [a, mts:District]
      - [mts:districtCode, $(Número_distrito), xsd:integer]
      - [mts:districtName, $(distrito)]
